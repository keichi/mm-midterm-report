\chapter{クラウドセキュリティとそのリスク}

\section{ロックイン}
\subsection{ロックインの概要}

現状，複数のクラウドプロバイダにまたがってデータおよびサービスのポータビリティを保証できるツール，手順，標準データフォーマット，もしくはサービスインタフェースは提供されていない．
さらに，一部のクラウドプロバイダには，顧客がサービスやデータを別のプロバイダに移転することを阻止するためのインセンティブを設けているところもある．
このために，顧客が現在サービスを受けているプロバイダにロックイン（囲い込み）され，別のクラウドプロバイダが提供するサービス，もしくは自社が構築したクラウドへとデータやサービスを移転することが困難となることがリスクとして考えられる．

このようにロックインが起こると，顧客は特定のプロバイダに依存せざるを得なくなり，プロバイダの倒産などで現行のクラウドサービスが使用不能になった場合壊滅的な影響を受ける可能性がある．
2013年10月に倒産したNirvanixを例にとってみても，クラウドストレージプロバイダの倒産はけしてありえないことではなく，むしろどんなプロバイダであっても倒産の可能性があることを考慮せねばならない．

また倒産しなくとも，自然災害が発生するなどしてクラウドサービスが使用不可能になることも考えられる．
他にも，プロバイダが買収された場合，利用規約やプライバシに関係するポリシーが断りなく変更され，現行のサービスに大きな影響がもたらされる可能性がある．
さらに，契約関係においてプロバイダ側がデータやサービスをいわば「人質」として扱い，プロバイダ側に有利な契約を結ばざるを得なくなるよう強制されるという可能性もある．

ロックインによる影響は，企業の評判，個人データ，リアルタイムなサービス適用など業務上極めて重要な資産に及ぶことが考えられる．
以上のことを踏まえると，ロックインはクラウドサービスを利用する上での大きなリスクであると言える．

\subsection{事例}

総務省が公開している「自治体クラウドの導入に関する調査研究報告書」という資料\cite{soumu}を基に，代表的なロックインの例を以下に示す．

\subsubsection{データ移行にかかる費用が原因となるロックイン}

クラウド間のデータ移行にかかる高額な費用は，顧客がクラウドプロバイダの乗り換える際の障害となり，ロックインを誘発する原因となることがしばしばある．

自治体業務システムにおいて，旧システムからプロバイダの異なる新システムへと移行する際，データ項目の不一致など互換性の無さを解決させるために，移行用のソフトウェアツールを作成する必要がある．
この移行用ソフトウェアツールは，旧システム用のデータ形式から中間レイアウトへ変換する「抽出移行ツール」と，中間レイアウトから新システム用のデータ形式へと変換する「取り込み移行ツール」の2段階構成となることが一般的である．
ここで用いられる中間レイアウトであるが，現在標準となるものは存在していない．各自治体ごとにデータ形式などが異なることから，それぞれの中間レイアウトが異なっているという現状がある．

異なるプロバイダのシステムへとデータを移行する作業その物にかかる費用もあるが，前述した移行用のソフトウェアツールを作成する費用も含まれるために，データ移行には高額な費用がかかってしまう．
また，移行作業費そのものはデータ数などに基づいて費用の詳細な内訳を出すことができるが，ソフトウェアツールの開発費はその詳細な内訳を受領することが難しいという実態があり，リスクを含んだ高額な費用を請求される場合がある．
さらに，前述したように標準的な中間レイアウトというものが存在しないため，一度作成したソフトウェアツールを他の自治体で使いまわすということもできない．

このように，プロバイダ間でデータを移行する際の標準的な仕様が定まっていないために，移行のたびに高額な開発費を投じて移行ソフトウェアツールを作製せねばならず，移行費用が高額となってしまいロックインの原因となる．

\subsubsection{外字データの使用に起因するロックイン}

新しいクラウドシステムに移行する際，データを移行するとともに，旧システムで用いていた外字，つまり各団体が独自に定義した文字コードを新システム用に整合させて変換する必要がある．
この変換作業は，フォントデータの著作権などの関係から，データ処理による変換だけでなく，一部手作業において対応せねばならない場合が多く，プロバイダから敬遠されがちであり，一般に高額な見積もり費用がだされることが多い．

\subsubsection{システム間データ連携に起因するロックイン}
現行システムの一部を次期システムに移行する際，既存システムの他部分との連携が問題となる場合がある．
たとえば，既存システムをすべてA社が構築したものを利用していたとして，一部だけB社が提供するシステムに変更したいとすると，変更部分と既存システムとの連携部分において，A社にシステムの改修を依頼しなければならない．
既存システム間での結合が密である場合，システムの改修作業は大規模かつ複雑なものになり，したがって費用も高額となることが考えられる．

\subsection{対策}

\subsubsection{クラウドプロバイダ側の対策}
クラウドプロバイダでとれる対策は，大きく以下の 3 つに分類できる．
\begin{itemize}
\item オープンスタンダードな技術を利用してクラウドを構築する
\item オープンソースなクラウドプラットフォームを用いてクラウドを構築する
\item データのエクスポートやインポートを簡単にできる仕組みを実装する
\end{itemize}

1つ目の対策は，オープンスタンダードな技術を利用してクラウドを構築することである．オープンスタンダードとは，非営利団体が策定し保守している，仕様文書が無料あるいは実質無料で入手可能，再利用に制限 がないなどの条件を満たした標準のことである\cite{openstandard}．クラウドプロバイダはオープンスタンダードの技術を利 用してクラウドサービスを構築することで，データや設定を記述するフォーマットなどを他のクラウドプロ バイダと相互運用可能にできる．このようなオープンスタンダードとしては，仮想マシンのイメージフォー マットの標準である OVF（Open Virtualization Format）\cite{ovf}や PaaS の TOSCA（Topology and Orchestration Specification for Cloud Applications）\cite{tosca}などがあげられる．また，このようなクラウドの標準化を推進したり， クラウドサービスの運用におけるベストプラクティスの普及を目的とした，CSCC（Cloud Standards Customer Council）\cite{cscc}という団体が存在する．

2つ目の対策が，オープンソースなクラウドプラットフォームを用いてクラウドを構築することである．クラウドプロバイダによっては，内製かつクローズドなソフトウェアによって自社のクラウドサービスを構築し ており，他のクラウドプロバイダと相互運用性を確保することが難しくなっている．そこで，オープンソース のクラウドプラットフォームソフトウェアを利用してクラウドサービスを構築することで，他のクラウドプロバイダと互換性を確保しやすくなると考えられる．このようなクラウドプラットフォームソフトウェアとして は，OpenStack\cite{openstack}，CloudStack\cite{cloudstack}，Eucalyptus\cite{eucalyptus}などが代表的である．これらのソフトウェアは全てオープ ンソースであるため，無償で利用可能である．また，ライセンスに従えば自由に改造したり，開発に参加する ことができる．例えば OpenStack プロジェクトには 200 社以上が参加している．このため，特定のベンダに 有利な仕様や実装になりにくいと考えられる．

3つ目の対策が，データのエクスポートやインポートを簡単にできる仕組みを実装することである．オープ ンスタンダードな技術や，オープンソースのソフトウェアの採用が難しい場合にも，クラウドプロバイダ間の 移行を可能にする手段は存在する．それが，データのエクスポートやインポートである．各クラウドプロバイダがオープンなデータフォーマット（e.g. XML, JSON, CSV, etc.）でユーザのデータをダウンロード・アップロードする機能を提供することで，中間的なデータフォーマットを介してクラウドプロバイダ間でデータを移 行することができる．このように，ユーザが自分のデータを全て自由かつ容易に管理し，移行できることを データポータビリティと呼ぶ．Data Portability Project\cite{dataportability}は，データポータビリティを具体的に定義し，クラウドプロバイダが満たすべき条件を明文化・啓蒙する活動を行っている．データポータビリティを実現した実 例として，Google の Google Takeout\cite{takeout}があげられる．ユーザは Google Takeout を利用すると，Google の提 供する様々なクラウドサービスから，自らのデータをアーカイブし，ダウンロードすることができる．

\subsubsection{ユーザ側の対策}

ユーザ側でとれる対策は，主に消極的なものになる．具体的には，ロックインされるクラウドプロバイダを
使わない，ロックインされる可能性のあるベンダ固有の技術を使ってシステムを構築しない，自らプラベートクラウドを構築する，などの対策が考えられる．
